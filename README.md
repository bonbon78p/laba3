# Лабораторная работа №3. Работа с базой данных.
Выполнил: Перцов Богдан, ИСП-221С

## Что делает приложение?

Данный репозиторий содержит два Android приложения, показывающие работу с базой данных. Оба приложения управляют информацией об одногруппниках, но используют разные схемы базы данных.

## Структура проекта

Проект состоит из двух папок: l3.1 и l3.2, каждая содержит:

• MainActivity: Главное активити с тремя кнопками.

• MainActivity2: Активити для отображения данных из базы данных. Данные выводятся в TextView с помощью StringBuilder.

• DatabaseHelper: Класс, реализующий SQLiteOpenHelper для работы с базой данных.

## Часть 1: Базовое приложение (l3.1)

Это приложение предоставляет простой пользовательский интерфейс с тремя кнопками:

• Показать данные: Открывает новое активити, отображающее все записи из таблицы "Одногруппники". Таблица содержит поля: ID (целое число, первичный ключ, автоинкремент), ФИО (текст), Время добавления (временная метка).

• Добавить запись: Добавляет новую запись в таблицу "Одногруппники" с ФИО "Новый одногруппник" и текущей временной меткой.

• Обновить последнюю запись: Изменяет поле ФИО последней добавленной записи на "Иванов Иван Иванович".

При первом запуске приложения:

1. Создается база данных odnogruppniki.db, если она не существует.
2. Создается таблица "Одногруппники".
3. В таблицу добавляются пять начальных записей с данными одногруппников.

Пример создания таблицы
```
db.execSQL("CREATE TABLE IF NOT EXISTS " + TABLE_NAME + " (" +
                COLUMN_ID + " INTEGER PRIMARY KEY AUTOINCREMENT, " +
                COLUMN_FIO + " TEXT, " +
                COLUMN_TIMESTAMP + " INTEGER)");

```

Пример вставки данных
```
ContentValues values = new ContentValues();
values.put(COLUMN_FIO, "Кастырин Сергей Алексеевич");
values.put(COLUMN_TIMESTAMP, System.currentTimeMillis());
db.insert(TABLE_NAME, null, values);
```

## Часть 2: Приложение с переопределяющей функцией onUpgrade (l3.2)

Это приложение является расширенной версией приложения из части 1. Ключевое отличие — переопределенная функция onUpgrade в классе DatabaseHelper, которая обрабатывает изменения схемы базы данных.

При обновлении версии базы данных (с версии 1 до 2):

1. Старая таблица "Одногруппники" удаляется.
2. Создается новая таблица "Одногруппники" с измененной структурой: ID, LastName, FirstName, MiddleName, Timestamp.

Пример onUpgrade
```
@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    if (oldVersion < newVersion) {
        db.execSQL("DROP TABLE IF EXISTS " + TABLE_NAME);
        onCreate(db);
    }
}

```

## Сборка и запуск

1. Клонирование: Клонируйте репозиторий с помощью git clone [URL репозитория].
2. Открытие проекта: Откройте каждый проект (l31 и l32) в Android Studio.
3. Запуск: Запустите каждое приложение на эмуляторе или устройстве Android.
